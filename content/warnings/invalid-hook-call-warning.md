---
title: ркЕркорк╛ркирлНркп Hook Call ркирлА ркЪрлЗркдрк╡ркгрлА
layout: single
permalink: warnings/invalid-hook-call-warning.html
---

 ркдркорлЗ ркХркжрк╛ркЪ ркЕрк╣рлАркВ ркЫрлЛ ркХрк╛рк░ркг ркХрлЗ ркдркоркирлЗ ркирлАркЪрлЗркирлЛ ркнрлВрк▓ рк╕ркВркжрлЗрк╢ ркорк│рлНркпрлЛ ркЫрлЗ:

 > Hooks рклркХрлНркд functional component ркирлА ркЕркВркжрк░ ркЬ ркмрлЛрк▓рк╛рк╡рлА рк╢ркХрк╛ркп. 

ркЕрк╣рлАркВ ркЖ ркдрлНрк░ркг рк╕рк╛ркорк╛ркирлНркп ркХрк╛рк░ркгрлЛ ркЫрлЗ ркЬрлЗркирлЗ ркдркорлЗ ркЬрлЛркИ рк░рк╣рлНркпрк╛ркВ ркЫрлЛ:

1. ркдркорк╛рк░рлА рккрк╛рк╕рлЗ React ркЕркирлЗ React DOM ркирк╛ **ркЕрк▓ркЧ ркЕрк▓ркЧ рк╡рк░рлНркЭрки** рк╣рлЛркИ рк╢ркХрлЗ ркЫрлЗ.
2. ркдркорлЗ ркХркжрк╛ркЪ  **[Hooks ркирк╛ ркирк┐ркпркорлЛ] ркдрлЛркбрлЛ ркЫрлЛ (/docs/hooks-rules.html)**.
3. ркдркорк╛рк░рк╛ ркЬрлЛркбрлЗ ркХркжрк╛ркЪ  **ркПркХркерлА рк╡ркзрк╛рк░рлЗ React ркирлА ркХрлЛрккрлА рк╣рлЛркИ рк╢ркХрлЗ ркЫрлЗ** ркПркХ ркЬ app ркирлА ркЕркВркжрк░.

ркЪрк╛рк▓рлЛ ркЖ ркжрк░рлЗркХ ркХрлЗрк╕ркирлЗ ркЬрлЛркИркП. 

## React and React DOM ркирк╛ ркЕрк▓ркЧ ркЕрк▓ркЧ рк╡рк░рлНркЭрки {#mismatching-versions-of-react-and-react-dom}

ркдркорлЗ ркХркжрк╛ркЪ `react-dom` ркирлБркВ рк╡рк░рлНркЭрки (< 16.8.0) ркЕркерк╡рк╛ `react-native` (< 0.59) рк╡рк╛рккрк░ркдрк╛ рк╣рк╕рлЛ ркЬрлЗ Hooks рк╕рккрлЛрк░рлНркЯ ркирк╣рлАркВ ркХрк░ркдрк╛ркВ рк╣рлЛркп. ркдркорлЗ ркдркорк╛рк░рлА ркПрккрлНрк▓рк┐ркХрлЗрк╢рки рклрлЛрк▓рлНркбрк░ркорк╛ркВ ркХркорк╛ркВркб `npm ls react-dom` ркЕркерк╡рк╛ `npm ls react-native` ркЪрк▓рк╛рк╡рлАркирлЗ ркЬрлЛркИ рк╢ркХрлЛ ркЫрлЛ ркХрлЗ ркдркорлЗ ркХркпрлБркВ рк╡рк░рлНркЭрки рк╡рк╛рккрк░рлЛ ркЫрлЛ. ркЬрлЛ ркдркоркирлЗ ркПркХ ркерлА рк╡ркзрк╛рк░рлЗ ркорк│рлЗ ркдрлЛ ркП рккркг рккрлНрк░рлЛркмрлНрк▓рлЗрко ркХрк░рлА рк╢ркХрлЗ ркЫрлЗ(рк╡ркзрлБ ркорк╛рк╣рк┐ркдрлА ркирлАркЪрлЗ).

## Hooks ркирк╛ ркирк┐ркпрко ркдрлЛркбрк╡рк╛ {#breaking-the-rules-of-hooks}

ркдркорлЗ рк╣рлВркХрк╕ ркирлЛ рк╡рккрк░рк╛рк╢ ркдрлНркпрк╛рк░рлЗркЬ ркХрк░рлА рк╢ркХрлЛ **ркЬркпрк╛рк░рлЗ React function component рк░рлЗркирлНркбрк░ ркХрк░ркдрлБркВ рк╣рлЛркп**:

* тЬЕ Functional componenet ркирлА ркмрлЛркбрлА ркорк╛ркВ ркорк╛ркдрлНрк░ рк╕рлМркерлА ркЙрккрк░ ркЬ hooks ркирлЗ call ркХрк░рк╡рлЛ. 
* тЬЕ [custom Hook](/docs/hooks-custom.html)ркирлА ркмрлЛркбрлА ркорк╛ркВ рк╕рлМркерлА ркЙрккрк░ ркЬ hooks ркирлЗ call ркХрк░рк╡рлЛ.

**ркЖркирк╛ рк╡рк┐рк╖рлЗркирлА рк╡ркзрлБ ркорк╛рк╣рк┐ркдрлА [Hooks ркирк╛ ркирк┐ркпркорлЛ](/docs/hooks-rules.html).**

```js{2-3,8-9}
function Counter() {
  // тЬЕ Good: top-level in a function component
  const [count, setCount] = useState(0);
  // ...
}

function useWindowWidth() {
  // тЬЕ Good: top-level in a custom Hook
  const [width, setWidth] = useState(window.innerWidth);
  // ...
}
```

ркорлВркВркЭрк╡ркг ркирлЗ ркЯрк╛рк│рк╡рк╛, Hooks ркирлЗ ркмрлАркЬрк╛ ркХрлЗрк╕ркорк╛ркВ call ркХрк░рк╡рк╛ supported **ркиркерлА**:

* ЁЯФ┤ Class components ркорк╛ркВ Hooks ркирлЗ call ркХрк░рк╡рк╛ ркирк╣рлАркВ.
* ЁЯФ┤ Event handlers ркорк╛ркВ Hooks ркирлЗ call ркХрк░рк╡рк╛ ркирк╣рлАркВ.
* ЁЯФ┤ Hooks ркирлЗ functions ркирлА ркЕркВркжрк░ call ркирк╛ ркХрк░рлЛ ркЬрлЗ `useMemo`, `useReducer`, or `useEffect` ркирлА ркЕркВркжрк░ рк╡рккрк░рк╛ркпрк╛ рк╣рлЛркп.

ркЬрлЛ ркдркорлЗ ркЖ ркирк┐ркпркорлЛ ркдрлЛркбрк╕рлЛ ркдрлЛ ркдркоркирлЗ ркЖ error ркЬрлЛрк╡рк╛ ркорк│рк╕рлЗ. 

```js{3-4,11-12,20-21}
function Bad1() {
  function handleClick() {
    // ЁЯФ┤ Bad: inside an event handler (to fix, move it outside!)
    const theme = useContext(ThemeContext);
  }
  // ...
}

function Bad2() {
  const style = useMemo(() => {
    // ЁЯФ┤ Bad: inside useMemo (to fix, move it outside!)
    const theme = useContext(ThemeContext);
    return createStyle(theme);
  });
  // ...
}

class Bad3 extends React.Component {
  render() {
    // ЁЯФ┤ Bad: inside a class component
    useEffect(() => {})
    // ...
  }
}
```

ркдркорлЗ [`eslint-plugin-react-hooks` plugin](https://www.npmjs.com/package/eslint-plugin-react-hooks) рк╡рк╛рккрк░рлА рк╢ркХрлЛ ркЫрлЗ ркЬрлЗ ркЖ ркнрлВрк▓рлЛ рк╢рлЛркзрк╡рк╛ркорк╛ркВ ркоркжркж ркХрк░рк╢рлЗ. 

>Note
>
>[Custom Hooks](/docs/hooks-custom.html) ркХркжрк╛ркЪ ркмрлАркЬрк╛ Hooks ркирлЗ call ркХрк░рлА рк╢ркХрлЗ ркЫрлЗ. (ркдрлЗркоркирлЛ ркорлБркЦрлНркп рк╣рлЗркдрлБ ркЬ ркП ркЫрлЗ). ркЖ ркХрк╛рко ркХрк░рлЗ ркЫрлЗ ркХрк╛рк░ркг ркХрлЗ custom Hooks ркдрлНркпрк╛рк░рлЗ ркЬ call ркерк╛ркп ркХрлЗ ркЬркпрк╛рк░рлЗ functional component рк░рлЗркирлНркбрк░ ркеркдрлЛ рк╣рлЛркп. 


## ркиркХрк▓рлА React {#duplicate-react}

Hooks ркирлЗ ркХрк╛рко ркХрк░рк╡рк╛ ркорк╛ркЯрлЗ, ркдркорк╛рк░рлА application ркирк╛ code ркирлБркВ `react` import ркП `react-dom` рккрлЗркХрлЗркЬркирк╛ ркПркЬ module ркирк╛ `react` import ркирлЗ рк░рлАрк╕рлЛрк▓рлНрк╡ ркХрк░ркдрлБркВ рк╣рлЛрк╡рлБркВ ркЬрлЛркИркП.  

ркЬрлЛ ркЖ `react` imports ркмрлЗ ркЕрк▓ркЧ objects ркирлЗ рк░рлАрк╕рлЛрк▓рлНрк╡ ркХрк░ркдрк╛ркВ рк╣рлЛркп ркдрлЛ, ркдркорлЗ ркЖ warning ркЬрлЛрк╢рлЛ. ркЖ ркХркжрк╛ркЪ ркдрлНркпрк╛рк░рлЗ ркеркИ рк╢ркХрлЗ ркЬрлЛ ркдркорк╛рк░рк╛ рккрк╛рк╕рлЗ **ркнрлВрк▓ ркерлА ркмрлЗ ркХрлЛрккрлА** `react` рккрлЗркХрлЗркЬркирлА ркЖрк╡рлА ркЬрк╛ркп.

ркЬрлЛ ркдркорлЗ package management ркорк╛ркЯрлЗ node рк╡рк╛рккрк░ркдрк╛ рк╣рлЛркп, ркдрлЛ ркдркорлЗ ркдркорк╛рк░рк╛ рккрлНрк░рлЛркЬрлЗркХрлНркЯ рклрлЛрк▓рлНркбрк░ ркорк╛ркВ ркЖ ркЪрк╛рк▓рлБ ркХрк░рлАркирлЗ ркЬрлЛркИ рк╢ркХрлЛ ркЫрлЛ:

    npm ls react

ркЬрлЛ ркдркорлЗ ркПркХ ркерлА рк╡ркзрк╛рк░рлЗ React ркЬрлЛркИ рк╢ркХрлЛ ркдрлЛ ркдркорк╛рк░рлЗ рк╢рк╛ ркорк╛ркЯрлЗ ркЖ ркмркирлНркпрлБркВ ркдрлЗ рк╢рлЛркзрк╡рк╛ркирлА ркЬрк░рлВрк░ рккркбрк╢рлЗ ркЕркирлЗ dependency tree рк╕рлБркзрк╛рк░рк╡рлБркВ рккркбрк╢рлЗ. ркЙркжрк╛рк╣рк░ркг ркдрк░рлАркХрлЗ, ркХркжрк╛ркЪ ркдркорлЗ рк╡рк╛рккрк░ркдрк╛ рк╣рк╕рлЛ ркП library `react` ркирлЗ dependency ркдрк░рлАркХрлЗ рк▓рлЗркдрлБркВ рк╣рк╕рлЗ (peer dependency ркирлА ркЬркЧрлНркпрк╛ркП). ркЬрлНркпрк╛ркВ рк╕рлБркзрлА ркП library рклрк┐ркХрлНрк╕ ркирк╛ ркерк╛ркп, [Yarn resolutions](https://yarnpkg.com/lang/en/docs/selective-version-resolutions/) ркПркХ рк╢ркХрлНркп ркХрк╛рк░рлНркп ркЫрлЗ.

ркдркорлЗ ркЖ рк╕ркорк╕рлНркпрк╛ ркирлЗ debug ркХрк░рлА рк╢ркХрлЛ ркЫрлЛ, ркХрлЗркЯрк▓рк╛ркХ logs ркЙркорлЗрк░рлАркирлЗ ркЕркирлЗ рклрк░рлАркерлА development server ркЪрк╛рк▓рлБ ркХрк░рлАркирлЗ:

```js
// Add this in node_modules/react-dom/index.js
window.React1 = require('react');

// Add this in your component file
require('react-dom');
window.React2 = require('react');
console.log(window.React1 === window.React2);
```

ркЬрлЛ ркП `false` рккрлНрк░рк┐ркирлНркЯ ркХрк░рлЗ ркдрлЛ ркдрлЗркирлЛ ркЕрк░рлНрке ркдркорк╛рк░рк╛ рккрк╛рк╕рлЗ ркмрлЗ Reacts ркЫрлЗ ркЕркирлЗ ркдркорк╛рк░рлЗ рк╢рк╛ ркорк╛ркЯрлЗ ркЖрк╡рлБркВ ркеркпрлБркВ ркдрлЗ рк╢рлЛркзрк╡рк╛ркирлА ркЬрк░рлВрк░ ркЫрлЗ. [ркЖ issue](https://github.com/facebook/react/issues/13991)ркорк╛ркВ рк▓рлЛркХрлЛ ркжрлНрк╡рк╛рк░рк╛ ркорк│рлЗрк▓рк╛ ркХрлЗркЯрк▓рк╛ркХ рк╕рк╛ркорк╛ркирлНркп ркХрк╛рк░ркгрлЛ рк╢рк╛ркорлЗрк▓ ркЫрлЗ.

ркЖ рк╕ркорк╕рлНркпрк╛ ркдрлНркпрк╛рк░рлЗ рккркг ркЖрк╡рлА рк╢ркХрлЗ ркЫрлЗ ркЬрлНркпрк╛рк░рлЗ ркдркорлЗ `npm link` ркХрлЗ ркдрлЗркирк╛ ркЬрлЗрк╡рлБ рк╡рк╛рккрк░рлЛ. ркП рк╕рлНркерк┐ркдрк┐ ркорк╛ркВ, ркдркорк╛рк░рлБркВ bundler ркХркжрк╛ркЪ ркмрлЗ Reacts "ркЬрлЛркИ" рк╢ркХрлЗ тАФ ркПркХ ркПрккрлНрк▓рк┐ркХрлЗрк╢рки рклрлЛрк▓рлНркбрк░ркорк╛ркВ ркЕркирлЗ ркПркХ one ркдркорк╛рк░рлА library ркирк╛ рклрлЛрк▓рлНркбрк░ркорк╛ркВ. ркП ркзрк╛рк░рлАркирлЗ ркХрлЗ `myapp` ркЕркирлЗ `mylib` ркП ркмрк╛ркЬрлБ-ркмрк╛ркЬрлБ ркирк╛ рклрлЛрк▓рлНркбрк░рлНрк╕ ркЫрлЗ, ркПркХ рк╢ркХрлНркп ркЙрккрк╛ркп `npm link ../myapp/node_modules/react` ркирлЗ `mylib` ркорк╛ркВркерлА ркЪрк╛рк▓рлБ ркХрк░рк╡рлА. ркЖ library ne ркПрккрлНрк▓рк┐ркХрлЗрк╢ркиркирлА React ркХрлЛрккрлА рк╡рк╛рккрк░рк╡рк╛ркирлБркВ ркХрлЗрк╣рк╢рлЗ. 

>Note
>
>рк╕рк╛ркорк╛ркирлНркп рк░рлАркдрлЗ, React ркПркХркерлА рк╡ркзрк╛рк░рлЗ рк╕рлНрк╡ркдркВркдрлНрк░ ркХрлЛрккрлА ркПркХ рккрлЗркЬ рккрк░ рк╡рк╛рккрк░рк╡рк╛ркирлБркВ рк╕рккрлЛрк░рлНркЯ ркХрк░рлЗ ркЫрлЗ (ркЙркжрк╛рк╣рк░ркг ркдрк░рлАркХрлЗ, ркЬрлЛ ркПркХ app ркЕркирлЗ third-party widget ркмркВркирлЗ рк╡рк╛рккрк░рлА рк╢ркХрлЗ ркЫрлЗ). ркП ркдрлНркпрк╛рк░рлЗркЬ ркЯрлВркЯрлЗ ркЫрлЗ ркЬрлНркпрк╛рк░рлЗ `require('react')` ркП component ркЕркирлЗ `react-dom`, ркХрлЗ ркЬрлЗркирк╛ркерлА ркХрлЛрккрлА render ркеркИ, рк╡ркЪрлНркЪрлЗ ркЕрк▓ркЧ-ркЕрк▓ркЧ рк░рлАрк╕рлЛрк▓рлНрк╡ ркХрк░рлЗ.

## ркмрлАркЬрк╛ ркХрк╛рк░ркгрлЛ {#other-causes}

ркЬрлЛ ркХрк╢рлБркВ рккркг ркХрк╛рко ркирк╛ ркХрк░рлЗ ркдрлЛ, ркорк╣рлЗрк░ркмрк╛ркирлА ркХрк░рлАркирлЗ ркХркорлЗркВркЯ ркХрк░ркЬрлЛ [ркЖ issue](https://github.com/facebook/react/issues/13991)ркЕркирлЗ ркЕркорлЗ ркоркжркж ркХрк░рк╡рк╛ркирлА ркХрлЛрк╢рк┐рк╕ ркХрк░рлАрк╕рлБркВ. ркирк╛ркирлБркВ ркЙркжрк╛рк╣рк░ркг ркмркирк╛рк╡рк╡рк╛ркирлЛ рккрлНрк░ркпрк╛рк╕ ркХрк░рлЛ ркХрлЗ ркЬрлЗркирк╛ркерлА ркЖ ркеркпрлБркВ тАФ ркдркорлЗ рк╕ркорк╕рлНркпрк╛ рк╢рлЛркзрлА рк╢ркХрк╢рлЛ ркЬрлЗрко ркЬрлЗрко ркдркорлЗ ркХрк░ркдрк╛ркВ ркЬрк╛ркУ.
